# MSC2938: Report Content to Moderators

Matrix currently offers [a mechanism](https://matrix.org/docs/spec/client_server/r0.6.1#post-matrix-client-r0-rooms-roomid-report-eventid)
to report bad content content (e.g. trolling, spam, abuse, etc.) to homeserver admins.
However, the homeserver admin is generally the wrong person for this as:

- on encrypted channels, they often do not have access to the content;
- on large servers, they quickly end up bombarded with reports, which makes them unable to take action.

This proposal extends the existing mechanism to let the server route
the report to room moderators and/or admins instead, who can better
take action.

## Proposal

### Introduction

Bad content (trolling, spam, abuse, etc.) on good rooms happens. When it happens, the entire
room suffers from it.

Whenever bad content show up, a room moderator or admin needs to intervene and either explain
the rules to the bad user or kick/ban them. However, room moderators/admins are often not monitoring
their rooms actively and are therefore not aware of bad content until someone points it to them.

As of this writing, there is no good mechanism for doing so. There is [a mechanism to
report bad content](https://matrix.org/docs/spec/client_server/r0.6.1#post-matrix-client-r0-rooms-roomid-report-eventid),
but this mechanism is delivered to the *homeserver admin*, who often cannot take action against
such bad content. To make things worse, clients that support this mechanism typically label
it "Report Content", which misleads users into asssuming that this is the right mechanism
to get in touch with room moderators/admins. The end result is that 80%+ of the reports that
reach the homeserver administrators are reports that can only be actioned by room
moderators/administrators (numbers from matrix.org for November 2020).


We propose an extension to the mechanism to request that the report be sent to room moderators/admins
instead of homeserver admins.

### Proposal

In the following, we call **moderators** for a room `roomId` any user with a powerlevel sufficient
to both kick and ban bad room members from that room.

We extend `POST /_matrix/client/r0/rooms/{roomId}/report/{eventId}` with a JSON Body Parameter

| Parameter | Type   | Description |
----------------------------------
| target    | string | One of "server-notice", "homeserver-admins". |

If `target` is `"homeserver-admins"` or unspecified, the behavior is unchanged.

If `target` is `"room-moderators"`, the message is intended to be propagated as a server notice to
moderators for this room.

We further extend server notices so that the field `server_notice_type` may also admit a new
value:

- `m.server_notice.content_report`:
  A user has reported some content as bad (trolling, spam, abuse, etc.).

Whenever `server_notice_type` is `m.server_notice.content_report`, 

| Parameter | Type   | Description |
----------------------------------
| body      | string | **Required** A human-readable description of the problem, generated by the server (e.g. "User %s has reported that '%s'"). |
| msgtype 	| enum 	 | **Required** In this case, `m.server_notice.content_report`. |
| roomId    | string | **Required** The id of the room being reported. |
| eventId   | string | **Required** The id of the event being reported. |
| userId    | string | **Required** The id of the user reporting the event. |
| score     | integer | The score to rate this content as where -100 is most offensive and 0 is inoffensive, as given by the reporting user. |
| reason    | string | **Required** The reason given by the reporting user. |


#### Client behavior (sending reports)

Clients may offer UX to let users report content to the room moderators instead of homeserver administrators.
When this UX is used, a call to `POST /_matrix/client/r0/rooms/{roomId}/report/{eventId}` is sent, e.g.

```json
{
  "target": "room-moderators",
  "score": -100,
  "reason": "this makes me sad"
}
```

#### Server behavior

Whenever a server receives a `POST /_matrix/client/r0/rooms/{roomId}/report/{eventId}` with `target` specified
as `"room-moderators"` they should:

1. ignore the message if `eventId` is not an event in `roomId` or if the user is not a member of `roomId`; otherwise
2. for all moderators in room `roomId` *on the local homeserver*:
  1. send a server notice
  ```json
  {
    "body": "User has reported content", // Or any other human-readable description
    "msgtype": "m.server_notice.content_report",
    "roomId": "{roomId}",   // From path parameter
    "eventId": "{eventId}", // From path parameter
    "userId": "{userId}",   // From authentication token
    "score": "{score}",     // From JSON body parameter
    "reason": "{reason}"    // From JSON body parameter
  }
  ```

#### Client behavior (receiving reports)

General client behavior is unchanged from https://matrix.org/docs/spec/client_server/r0.6.1#id166.

In this specific case, clients may additionally offer a link to event `eventId` in `roomId` to
simplify the work of moderators.


## Potential issues

This proposal does not yet cover the case in which no moderator comes from the same
homeserver as the user. This is a limitation that needs to be fixed before merging this proposal.
However, it may be possible to run an experiment before this limitation is fixed.

This proposal may end up being used for spamming the moderators of rooms. We believe
that this is no worse than the current implementation which may be used for spamming the administrator
of the homeserver.

## Alternatives

An alternative would be to encourage users to send DM to moderators. This has the
following drawbacks:

1. This requires moderators to accept every single DM of they wish to deal with bad content. We assume
  that many moderators will not want to do that.
2. Sending DMs to people one is not familiar with is considered impolite by many users. Many users
  will therefore not do it and rather use the current Report Content button, with the issues
  listed at the start of this document.
3. If several users report the same content, moderators may find themselves bombarded
  with large number of DMs, which makes tracking bad content more complicated.

A variant would be to implement a "Report Content to Room Moderators" button as a mechanism that
sends a DM to all moderators in the room. This solves one of the pain points above but still
has the following drawbacks:

1. This requires moderators to accept every single DM of they wish to deal with bad content. We assume
  that many moderators will not want to do that.
2. If several users report the same content, moderators may find themselves bombarded
  with large number of DMs, which makes tracking bad content more complicated.


## Security considerations

If a user reports bad content (e.g. political propaganda) to an moderator who actually
sees this content as good, there is a risk of reprisal against the reporting user. We consider this
risk fairly low.

A graver risk may appear if a user notices bad content (e.g. terrorism, child sexual
abuse, illicit substance trade) on a room actually dedicated to this bad content and accidentally reports
it to the room moderator instead of the homeserver administrator and/or the authorities.

We believe that the risk can be mitigated/eliminated by having the client UX explain carefully the
difference between sending to a homeserver administrator, to a room moderator or to the authorities.
